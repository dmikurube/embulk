diff --git a/embulk-core/build.gradle b/embulk-core/build.gradle
index 268a10f3..e14b1a0e 100644
--- a/embulk-core/build.gradle
+++ b/embulk-core/build.gradle
@@ -25,6 +25,34 @@ configurations {
     compile.exclude group: 'org.sonatype.sisu.inject', module: 'cglib'
 }
 
+sourceSets {
+    jarsForTesting {
+        java {
+            srcDir 'src/jarsForTesting/java'
+        }
+    }
+}
+
+// JAR file(s) for tests are generated from different tasks / sourceSets
+// so that these classes are not automatically loaded in running tests.
+
+task jarsForTesting(type: JavaExec) {
+    ext {
+        destinationDir = "${buildDir}/jarsForTesting"
+        destination1 = "${buildDir}/jarsForTesting/jarForTesting1.jar"
+    }
+    doFirst {
+        file("${destinationDir}").mkdir()
+        delete "${destination1}"
+    }
+    classpath = sourceSets.jarsForTesting.runtimeClasspath
+    main = "org.embulk.deps.classloaders.BuildJarForTesting"
+    args "${destination1}"
+}
+
+processTestResources.dependsOn("jarsForTesting")
+processTestResources.from("${jarsForTesting.destination1}")
+
 import com.github.jrubygradle.JRubyExec
 import com.github.jrubygradle.JRubyPrepare
 
@@ -62,16 +90,13 @@ dependencies {
     // For embulk/guess/charset.rb. See also embulk.gemspec
     compile 'com.ibm.icu:icu4j:54.1.1'
 
-    // For MavenPluginSource / MavenArtifactFinder.
-    compile 'org.eclipse.aether:aether-api:1.1.0'
-    compile 'org.eclipse.aether:aether-spi:1.1.0'
-    compile 'org.eclipse.aether:aether-util:1.1.0'
-    compile 'org.eclipse.aether:aether-impl:1.1.0'
-    compile 'org.apache.maven:maven-aether-provider:3.3.9'
+    // bval-jsr303:0.5 depends on commons-lang3:3.1,
+    // but it was upgraded to 3.4 when maven-aether-provider:3.3.9 was introduced.
+    // Maven-related dependencies are moved to embulk-deps-maven.
+    compile 'org.apache.commons:commons-lang3:3.4'
 
     // For CLI
     compile 'commons-cli:commons-cli:1.3.1'
-    compile 'org.apache.maven:maven-artifact:3.3.9'
     compile 'org.apache.velocity:velocity:1.7'
 
     testCompile 'junit:junit:4.12'
